<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Final v2 - Fiscal CORE-SE</title>
    <style>
        :root {
            --primary-color: #005a9c; --secondary-color: #28a745; --highlight-color: #fffbe6;
            --danger-color: #dc3545; --light-gray: #f8f9fa; --border-color: #ddd;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f4f7f9; color: #333; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 1200px; background-color: #fff; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); padding: 30px; }
        h1, h2 { text-align: center; color: var(--primary-color); border-bottom: 2px solid #e0e0e0; padding-bottom: 15px; margin-bottom: 25px; }
        .progress-container { margin-bottom: 30px; }
        #progressText { font-size: 1.2em; font-weight: 600; text-align: center; margin-bottom: 10px; color: #333; }
        .progress-bar { width: 100%; background-color: #e0e0e0; border-radius: 25px; height: 25px; overflow: hidden; }
        #progressBar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--secondary-color), #218838); border-radius: 25px; transition: width 0.4s ease-in-out; }
        details { margin-bottom: 15px; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; }
        summary { font-size: 1.3em; font-weight: 600; padding: 15px; background-color: var(--light-gray); cursor: pointer; outline: none; color: var(--primary-color); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 15px; border-bottom: 1px solid #e0e0e0; text-align: left; vertical-align: middle; transition: background-color 0.3s; }
        tr.group-header td { background-color: #e9ecef; font-weight: bold; color: var(--primary-color); }
        .priority-checkbox, .completed-checkbox { width: 40px; text-align: center; }
        .completion-date { font-size: 0.85em; color: #555; font-style: italic; white-space: nowrap; }
        .star-checkbox { width: 25px; height: 25px; border: 2px solid #ccc; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2em; border-radius: 4px; user-select: none; transition: all 0.2s; }
        .star-checkbox.starred { border-color: #ffc107; color: #ffc107; background-color: #fff9e6;}
        .priority { background-color: var(--highlight-color) !important; font-weight: 500;}
        .completed { text-decoration: line-through; color: #888; }
        
        /* CALEND√ÅRIO ATUALIZADO */
        .calendar-container { padding: 15px; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-header button { background: none; border: 1px solid var(--border-color); cursor: pointer; font-size: 1.5em; padding: 5px 10px; border-radius: 5px;}
        #calendarMonthYear { font-size: 1.5em; font-weight: bold; color: var(--primary-color); }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .calendar-weekday { text-align: center; padding: 10px; border-radius: 5px; font-weight: bold; background-color: var(--light-gray); }
        .calendar-day { cursor: pointer; border: 1px solid #eee; position: relative; min-height: 50px; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 5px; }
        .calendar-day-number { font-size: 1em; }
        .calendar-day.studied { background-color: #d4edda; color: #155724; font-weight: bold; }
        .calendar-day.today { border: 2px solid var(--primary-color); }
        .markers { display: flex; position: absolute; bottom: 4px; gap: 4px; font-size: 1.2em; }
        .calendar-legend { margin-top: 20px; padding-top:15px; border-top: 1px solid #eee; font-size: 0.9em; color: #555; }
        .legend-item { display: flex; align-items: center; margin-bottom: 5px; }
        .legend-icon { font-size: 1.5em; width: 30px; text-align: center; margin-right: 10px; }
        
        /* MODAL (Pop-up) */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .modal-content textarea { width: 100%; min-height: 150px; margin: 10px 0; padding: 10px; box-sizing: border-box; }
        
        /* TABELAS DIN√ÇMICAS */
        .dynamic-table .delete-btn { background-color: var(--danger-color); color: white; border: none; cursor: pointer; border-radius: 50%; width: 25px; height: 25px; font-weight: bold; }
        
        /* BACKUP */
        .backup-section { margin-top: 40px; padding: 20px; border: 1px dashed #007bff; border-radius: 8px; background-color: var(--light-gray);}
        .backup-section button { background-color: #007bff; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-size: 1em; margin-right: 10px; margin-top: 10px; }
        .backup-section textarea { width: 100%; height: 80px; margin-top: 10px; }
    </style>
</head>
<body>
    <div id="notesModal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modalTitle"></h3>
            <textarea id="modalTextarea" placeholder="Digite aqui o que voc√™ estudou, suas d√∫vidas, etc..."></textarea>
            <div class="modal-buttons" style="text-align: right;">
                <button id="modalSaveBtn" class="action-button">Salvar</button>
                <button id="modalCancelBtn" style="background-color: #6c757d;">Cancelar</button>
            </div>
        </div>
    </div>

    <div class="container">
        <h1>Painel de Performance - Fiscal CORE-SE</h1>
        <div class="progress-container">
            <p id="progressText">Progresso Total: 0%</p>
            <div class="progress-bar"><div id="progressBar"></div></div>
        </div>

        <details open><summary>üìÖ Calend√°rio de Estudos e Prazos</summary>
            <div class="calendar-container">
                <div class="calendar-header">
                    <button id="prevMonthBtn">&lt;</button>
                    <h2 id="calendarMonthYear" style="border:none; margin:0;"></h2>
                    <button id="nextMonthBtn">&gt;</button>
                </div>
                <div class="calendar-grid" id="calendarWeekdays"></div>
                <div class="calendar-grid" id="calendarDays"></div>
                <div class="calendar-legend">
                    <h3>Legenda:</h3>
                    <div class="legend-item"><span class="legend-icon" style="background-color: #d4edda; border-radius:4px; padding: 2px 5px;"> Dia </span> = Dia de Estudo Registrado</div>
                    <div class="legend-item"><span class="legend-icon">‚úèÔ∏è</span> = Dia com Anota√ß√£o Pessoal</div>
                    <div class="legend-item"><span class="legend-icon">üèÅ</span> = DIA DA PROVA</div>
                    <div class="legend-item"><span class="legend-icon">üö©</span> = Fim do Per√≠odo de Inscri√ß√£o</div>
                    <div class="legend-item"><span class="legend-icon">üí∞</span> = √öltimo Dia para Pagamento</div>
                    <div class="legend-item"><span class="legend-icon">üìç</span> = Divulga√ß√£o dos Locais de Prova</div>
                    <div class="legend-item"><span class="legend-icon">üìã</span> = Divulga√ß√£o do Gabarito Preliminar</div>
                </div>
            </div>
        </details>
        
        <details><summary>üéØ T√≥picos do Edital</summary>
            <table id="topicsTable">
                <thead><tr><th>Prioridade</th><th>Conclu√≠do</th><th>Disciplina</th><th>Conte√∫do</th><th>Conclu√≠do em</th></tr></thead>
                <tbody></tbody>
            </table>
        </details>
        
        <details><summary>üìä Controle de Simulados</summary>
            <table id="simuladosTable" class="dynamic-table">
                <thead><tr><th>Data</th><th>N¬∫ Quest√µes</th><th>Acertos</th><th>% Acerto</th><th>Observa√ß√µes</th><th>A√ß√£o</th></tr></thead>
                <tbody></tbody>
            </table>
            <button id="addSimulado" class="action-button">Adicionar Simulado</button>
        </details>

        <div class="backup-section">
             <h3>üõ°Ô∏è Backup do Progresso</h3>
             <button id="exportBtn">Exportar Progresso</button>
             <textarea id="backupData" readonly></textarea>
             <div class="import-group">
                  <p>Para restaurar, cole seu c√≥digo de backup abaixo:</p>
                  <textarea id="importData"></textarea>
                  <button id="importBtn">Importar Progresso</button>
             </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const topicsData = [
            { group: 'Conhecimentos B√°sicos', topics: [
                { id: 'item-1', cat: 'Portugu√™s', desc: 'Compreens√£o e interpreta√ß√£o de textos' }, { id: 'item-2', cat: 'Portugu√™s', desc: 'Reconhecimento de tipos e g√™neros textuais' }, { id: 'item-3', cat: 'Portugu√™s', desc: 'Dom√≠nio da ortografia oficial' }, { id: 'item-4', cat: 'Portugu√™s', desc: 'Coes√£o textual e Conectivos' }, { id: 'item-5', cat: 'Portugu√™s', desc: 'Morfossintaxe (classes de palavras, pontua√ß√£o)' }, { id: 'item-6', cat: 'Portugu√™s', desc: 'Concord√¢ncia e Reg√™ncia (verbal e nominal)' }, { id: 'item-7', cat: 'Portugu√™s', desc: 'Crase e Coloca√ß√£o Pronominal' }, { id: 'item-8', cat: 'RLM', desc: 'Opera√ß√µes, propriedades e aplica√ß√µes' }, { id: 'item-9', cat: 'RLM', desc: 'Princ√≠pios de contagem e probabilidade' }, { id: 'item-10', cat: 'RLM', desc: 'Arranjos, permuta√ß√µes e combina√ß√µes' }, { id: 'item-11', cat: 'RLM', desc: 'Conjuntos num√©ricos e opera√ß√µes' }, { id: 'item-12', cat: 'RLM', desc: 'Raz√µes e propor√ß√µes (Regra de 3, %)' }, { id: 'item-13', cat: 'RLM', desc: 'Compreens√£o de estruturas l√≥gicas' }, { id: 'item-14', cat: 'RLM', desc: 'L√≥gica de argumenta√ß√£o e Diagramas l√≥gicos' }, { id: 'item-15', cat: 'Inform√°tica', desc: 'Hardware, Software, Perif√©ricos' }, { id: 'item-16', cat: 'Inform√°tica', desc: 'Microsoft Office (Word, Excel)' }, { id: 'item-17', cat: 'Inform√°tica', desc: 'Sistema Operacional (Windows 10/11)' }, { id: 'item-18', cat: 'Inform√°tica', desc: 'Redes: Internet e intranet' }, { id: 'item-19', cat: 'Inform√°tica', desc: 'Navegadores e Correio (Outlook)' }, { id: 'item-20', cat: 'Inform√°tica', desc: 'Seguran√ßa da Informa√ß√£o (V√≠rus, Backup, Firewall)' }
            ]},
            { group: 'Conhecimentos Complementares', topics: [
                { id: 'item-21', cat: 'Leg. e √âtica', desc: '√âtica e fun√ß√£o p√∫blica. √âtica no Setor P√∫blico' }, { id: 'item-22', cat: 'Leg. e √âtica', desc: 'Lei n¬∫ 8.429/1992 (Improbidade)' }, { id: 'item-23', cat: 'Leg. e √âtica', desc: 'Lei n¬∫ 9.784/1999 (Processo Administrativo)' }, { id: 'item-24', cat: 'Leg. e √âtica', desc: 'Lei n¬∫ 12.527/2011 (Acesso √† Informa√ß√£o)' }, { id: 'item-25', cat: 'Leg. e √âtica', desc: 'Lei n¬∫ 13.709/2018 (LGPD)' }, { id: 'item-26', cat: 'Atualidades', desc: 'T√≥picos de Pol√≠tica, Economia, Sociedade, etc.' }
            ]},
            { group: 'Conhecimentos Espec√≠ficos', topics: [
                { id: 'item-27', cat: 'Dir. Admin.', desc: 'Organiza√ß√£o Administrativa' }, { id: 'item-28', cat: 'Dir. Admin.', desc: 'Ato Administrativo' }, { id: 'item-29', cat: 'Dir. Admin.', desc: 'Agentes P√∫blicos' }, { id: 'item-30', cat: 'Dir. Admin.', desc: 'Poderes Administrativos e de Pol√≠cia' }, { id: 'item-31', cat: 'Dir. Admin.', desc: 'Licita√ß√£o e Contratos Administrativos' }, { id: 'item-32', cat: 'Dir. Admin.', desc: 'Controle da Administra√ß√£o P√∫blica' }, { id: 'item-33', cat: 'Dir. Admin.', desc: 'Responsabilidade Civil do Estado' }, { id: 'item-34', cat: 'Dir. Admin.', desc: 'Regime Jur√≠dico-Administrativo (Princ√≠pios)' }, { id: 'item-35', cat: 'Arquivologia', desc: 'Conceitos e gest√£o de documentos' }, { id: 'item-36', cat: 'Fun√ß√µes Adm.', desc: 'Planejamento, organiza√ß√£o, dire√ß√£o e controle' }, { id: 'item-37', cat: 'Atendimento', desc: 'Qualidade no atendimento e Reda√ß√£o Oficial' }, { id: 'item-38', cat: 'Leg. Espec.', desc: 'Lei Federal n¬∫ 4.886/1965 (Principal!)' }, { id: 'item-39', cat: 'Leg. Espec.', desc: 'Lei Federal n¬∫ 6.839/1980' }, { id: 'item-40', cat: 'Leg. Espec.', desc: 'C√≥digo Civil (arts. 710 a 721)' }, { id: 'item-41', cat: 'Leg. Espec.', desc: 'C√≥digo de √âtica e Disciplina' }, { id: 'item-42', cat: 'Leg. Espec.', desc: 'Resolu√ß√£o CONFERE n¬∫ 1063/2015' }, { id: 'item-43', cat: 'Leg. Espec.', desc: 'Resolu√ß√£o CONFERE n¬∫ 1.130/2019' }
            ]}
        ];
        
        const topicsTableBody = document.querySelector('#topicsTable tbody');
        let totalItems = 0;
        topicsData.forEach(group => {
            const groupHeader = document.createElement('tr');
            groupHeader.className = 'group-header';
            groupHeader.innerHTML = `<td colspan="5">${group.group}</td>`;
            topicsTableBody.appendChild(groupHeader);
            group.topics.forEach(topic => {
                totalItems++;
                const row = document.createElement('tr');
                row.innerHTML = `<td class="priority-checkbox"><div class="star-checkbox" title="Marcar como prioridade"></div></td><td class="completed-checkbox"><input type="checkbox" id="${topic.id}" title="Marcar como conclu√≠do"></td><td>${topic.cat}</td><td>${topic.desc}</td><td class="completion-date"></td>`;
                topicsTableBody.appendChild(row);
            });
        });

        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        
        function updateProgress() {
            const checkedItems = document.querySelectorAll('#topicsTable input[type="checkbox"]:checked').length;
            const percentage = totalItems > 0 ? (checkedItems / totalItems) * 100 : 0;
            progressBar.style.width = percentage + '%';
            progressText.textContent = `Progresso Total: ${Math.round(percentage)}% (${checkedItems}/${totalItems})`;
        }
        
        function applyRowStyles(row, data) {
            row.classList.toggle('priority', data.priority);
            row.classList.toggle('completed', data.checked);
            const starCheckbox = row.querySelector('.star-checkbox');
            starCheckbox.classList.toggle('starred', data.priority);
            starCheckbox.innerHTML = data.priority ? '‚≠ê' : '';
        }
        
        function saveItemState(checkbox) {
            const row = checkbox.closest('tr');
            const data = JSON.parse(localStorage.getItem(checkbox.id) || '{ "checked": false, "timestamp": null, "priority": false }');
            data.checked = checkbox.checked;
            data.timestamp = checkbox.checked ? new Date().toLocaleString('pt-BR', { day: '2-digit', month: '2-digit', year: '2-digit', hour: '2-digit', minute: '2-digit' }) : null;
            row.querySelector('.completion-date').textContent = data.timestamp || '';
            localStorage.setItem(checkbox.id, JSON.stringify(data));
            applyRowStyles(row, data);
        }
        
        function savePriorityState(starCheckbox) {
             const row = starCheckbox.closest('tr');
             const checkbox = row.querySelector('input[type="checkbox"]');
             const data = JSON.parse(localStorage.getItem(checkbox.id) || '{ "checked": false, "timestamp": null, "priority": false }');
             data.priority = !starCheckbox.classList.contains('starred');
             localStorage.setItem(checkbox.id, JSON.stringify(data));
             applyRowStyles(row, data);
        }

        function loadTopicsProgress() {
            document.querySelectorAll('#topicsTable input[type="checkbox"]').forEach(checkbox => {
                const data = JSON.parse(localStorage.getItem(checkbox.id) || 'null');
                if (data) {
                    checkbox.checked = data.checked;
                    checkbox.closest('tr').querySelector('.completion-date').textContent = data.timestamp || '';
                    applyRowStyles(checkbox.closest('tr'), data);
                }
            });
        }
        
        topicsTableBody.addEventListener('click', (e) => {
            if (e.target.matches('input[type="checkbox"]')) { saveItemState(e.target); updateProgress(); }
            if (e.target.matches('.star-checkbox')) { savePriorityState(e.target); }
        });

        const calendarMonthYear = document.getElementById('calendarMonthYear'), calendarDays = document.getElementById('calendarDays'), today = new Date(2025, 8, 14);
        let currentMonth = today.getMonth(), currentYear = today.getFullYear();
        // NOVO: Estrutura de eventos com √≠cones
        const editalEvents = { 
            '2025-09-22': { text: 'Fim do per√≠odo de inscri√ß√£o', icon: 'üö©' }, 
            '2025-09-24': { text: '√öltimo dia para pagamento', icon: 'üí∞' }, 
            '2025-10-21': { text: 'Divulga√ß√£o dos locais de prova', icon: 'üìç' }, 
            '2025-10-26': { text: 'DIA DA PROVA!', icon: 'üèÅ' }, 
            '2025-10-27': { text: 'Divulga√ß√£o do gabarito preliminar', icon: 'üìã' }
        };
        let calendarNotes = JSON.parse(localStorage.getItem('calendarNotes') || '{}');

        function generateCalendar(year, month) {
            calendarDays.innerHTML = '';
            calendarMonthYear.textContent = new Date(year, month).toLocaleString('pt-BR', { month: 'long', year: 'numeric' });
            const firstDay = new Date(year, month, 1).getDay(), daysInMonth = new Date(year, month + 1, 0).getDate();
            for (let i = 0; i < firstDay; i++) { calendarDays.innerHTML += `<div></div>`; }
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.innerHTML = `<span class="calendar-day-number">${day}</span><div class="markers"></div>`;
                const markersContainer = dayEl.querySelector('.markers');

                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) dayEl.classList.add('today');
                if (calendarNotes[dateStr]) {
                    dayEl.classList.add('studied');
                    markersContainer.innerHTML += `<span title="Voc√™ tem uma anota√ß√£o neste dia">‚úèÔ∏è</span>`;
                }
                if (editalEvents[dateStr]) {
                    const event = editalEvents[dateStr];
                    markersContainer.innerHTML += `<span title="${event.text}">${event.icon}</span>`;
                }
                
                dayEl.addEventListener('click', () => openNotesModal(dateStr));
                calendarDays.appendChild(dayEl);
            }
        }
        document.getElementById('calendarWeekdays').innerHTML = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'].map(day => `<div class="calendar-weekday">${day}</div>`).join('');
        document.getElementById('prevMonthBtn').addEventListener('click', () => { if (currentMonth > 8 || currentYear > 2025) { currentMonth--; if(currentMonth < 0){ currentMonth = 11; currentYear--; } generateCalendar(currentYear, currentMonth); } });
        document.getElementById('nextMonthBtn').addEventListener('click', () => { if (currentMonth < 9 || currentYear < 2025) { currentMonth++; if(currentMonth > 11){ currentMonth = 0; currentYear++; } generateCalendar(currentYear, currentMonth); } });

        const modal = document.getElementById('notesModal');
        let currentModalDate = null;
        function openNotesModal(dateStr) {
            currentModalDate = dateStr;
            const dateObj = new Date(dateStr + 'T12:00:00');
            document.getElementById('modalTitle').textContent = `Anota√ß√µes para ${dateObj.toLocaleDateString('pt-BR')}`;
            document.getElementById('modalTextarea').value = calendarNotes[dateStr] || '';
            modal.style.display = 'flex';
        }
        document.getElementById('modalSaveBtn').addEventListener('click', () => {
            const note = document.getElementById('modalTextarea').value.trim();
            if (note) { calendarNotes[currentModalDate] = note; } else { delete calendarNotes[currentModalDate]; }
            localStorage.setItem('calendarNotes', JSON.stringify(calendarNotes));
            modal.style.display = 'none';
            generateCalendar(currentYear, currentMonth);
        });
        document.getElementById('modalCancelBtn').addEventListener('click', () => modal.style.display = 'none');
        
        const simuladosTableBody = document.querySelector('#simuladosTable tbody'), addSimuladoBtn = document.getElementById('addSimulado');
        function createSimuladoRow(data = []) {
            const row = document.createElement('tr');
            row.innerHTML = `<td><input type="date" value="${data[0] || ''}"></td><td><input type="number" placeholder="ex: 40" value="${data[1] || ''}"></td><td><input type="number" placeholder="ex: 32" value="${data[2] || ''}"></td><td></td><td><input type="text" placeholder="Observa√ß√µes" value="${data[3] || ''}"></td><td><button class="delete-btn">X</button></td>`;
            return row;
        }
        function updateSimuladoPercent(row) {
            const acertos = parseFloat(row.cells[2].querySelector('input').value) || 0;
            const questoes = parseFloat(row.cells[1].querySelector('input').value) || 0;
            row.cells[3].textContent = (questoes > 0) ? ((acertos / questoes) * 100).toFixed(1) + '%' : '';
        }
        function saveSimulados() {
            const data = Array.from(simuladosTableBody.rows).map(row => Array.from(row.querySelectorAll('input')).map(input => input.value));
            localStorage.setItem('simuladosData', JSON.stringify(data));
        }
        function loadSimulados() {
            const data = JSON.parse(localStorage.getItem('simuladosData') || '[]');
            simuladosTableBody.innerHTML = '';
            data.forEach(rowData => {
                const newRow = createSimuladoRow(rowData);
                simuladosTableBody.appendChild(newRow);
                updateSimuladoPercent(newRow);
            });
        }
        addSimuladoBtn.addEventListener('click', () => { simuladosTableBody.appendChild(createSimuladoRow()); });
        simuladosTableBody.addEventListener('input', (e) => { if (e.target.tagName === 'INPUT') { updateSimuladoPercent(e.target.closest('tr')); saveSimulados(); } });
        simuladosTableBody.addEventListener('click', (e) => { if (e.target.classList.contains('delete-btn')) { e.target.closest('tr').remove(); saveSimulados(); } });

        const exportBtn = document.getElementById('exportBtn'), importBtn = document.getElementById('importBtn');
        exportBtn.addEventListener('click', () => {
            const allData = { topics: {}, simulados: JSON.parse(localStorage.getItem('simuladosData') || '[]'), calendarNotes: JSON.parse(localStorage.getItem('calendarNotes') || '{}') };
            document.querySelectorAll('#topicsTable input[type="checkbox"]').forEach(cb => { const item = localStorage.getItem(cb.id); if(item) allData.topics[cb.id] = JSON.parse(item); });
            document.getElementById('backupData').value = JSON.stringify(allData, null, 2);
            alert('Backup gerado. Copie e salve!');
        });
        importBtn.addEventListener('click', () => {
            const backupJson = document.getElementById('importData').value.trim();
            if (!backupJson) { alert('Cole seu c√≥digo de backup.'); return; }
            try {
                const allData = JSON.parse(backupJson);
                if (allData.topics) Object.keys(allData.topics).forEach(id => localStorage.setItem(id, JSON.stringify(allData.topics[id])));
                if (allData.simulados) localStorage.setItem('simuladosData', JSON.stringify(allData.simulados));
                if (allData.calendarNotes) localStorage.setItem('calendarNotes', JSON.stringify(allData.calendarNotes));
                alert('Progresso importado! A p√°gina ser√° recarregada.');
                location.reload();
            } catch (error) { alert('Erro ao importar. C√≥digo inv√°lido.'); }
        });

        loadTopicsProgress(); updateProgress(); generateCalendar(currentYear, currentMonth); loadSimulados();
    });
    </script>
</body>
</html>